# SPDX-License-Identifier: Apache-2.0
# Copyright (c) 2020-2025 Intel Corporation

{"addr":":8080","file":"/workspace-go/pkg/common/utils/logger_wrapper.go:26","func":"github.com/intel/sriov-fec-operator/pkg/common/utils.(*logrusWrapper).Info","level":"info","msg":"Metrics server is starting to listen","name":"events","time":"2025-05-07T22:53:44Z"}
time="2025-05-07T22:53:44Z" level=info msg="Registering metrics http server extra handler" path=/bbdevconfig
{"file":"/workspace-go/pkg/daemon/telemetry.go:134","func":"github.com/intel/sriov-fec-operator/pkg/daemon.StartTelemetryDaemon","level":"info","msg":"registered Prometheus telemetry collectors and endpoint","time":"2025-05-07T22:53:44Z"}
{"default":0,"file":"/workspace-go/pkg/daemon/telemetry.go:187","func":"github.com/intel/sriov-fec-operator/pkg/daemon.getMetrics","level":"info","msg":"disabling metrics update loop","time":"2025-05-07T22:53:44Z"}
{"file":"/workspace-go/pkg/common/drainhelper/drainhelper.go:63","func":"github.com/intel/sriov-fec-operator/pkg/common/drainhelper.NewDrainHelper","level":"info","msg":"drain settings","time":"2025-05-07T22:53:44Z","timeout seconds":90}
{"duration seconds":600,"file":"/workspace-go/pkg/common/drainhelper/drainhelper.go:75","func":"github.com/intel/sriov-fec-operator/pkg/common/drainhelper.NewDrainHelper","level":"info","msg":"lease settings","time":"2025-05-07T22:53:44Z"}
[/sriov_config/config/accelerators.json]Accelerator found 0000:f7:00.0 -> driver: 'vfio-pci' class: 'Processing accelerators' vendor: 'Intel Corporation' product: 'unknown'
{"file":"/workspace-go/pkg/daemon/daemon_fec.go:124","func":"github.com/intel/sriov-fec-operator/pkg/daemon.(*FecNodeConfigReconciler).CreateEmptyNodeConfigIfNeeded","level":"info","msg":"SriovFecNodeConfig{vran-acceleration-operators/spr-npg-bds1-eec4} not found - creating","time":"2025-05-07T22:53:44Z"}
{"file":"/workspace-go/pkg/daemon/daemon_fec.go:510","func":"github.com/intel/sriov-fec-operator/pkg/daemon.(*FecNodeConfigReconciler).getPfBbConfVersion","level":"info","msg":"pf_bb_config Version is:v25.01-0-g812e032","time":"2025-05-07T22:53:44Z"}
[/sriov_config/config/accelerators_vrb.json]Accelerator found 0000:f7:00.0 -> driver: 'vfio-pci' class: 'Processing accelerators' vendor: 'Intel Corporation' product: 'unknown'
{"file":"/workspace-go/pkg/daemon/daemon_vrb.go:159","func":"github.com/intel/sriov-fec-operator/pkg/daemon.(*VrbNodeConfigReconciler).CreateEmptyNodeConfigIfNeeded","level":"info","msg":"VrbnodeConfig{vran-acceleration-operators/spr-npg-bds1-eec4} not found - creating","time":"2025-05-07T22:53:44Z"}
{"file":"/workspace-go/pkg/daemon/daemon_vrb.go:545","func":"github.com/intel/sriov-fec-operator/pkg/daemon.(*VrbNodeConfigReconciler).getVrbPfBbConfVersion","level":"info","msg":"pf_bb_config Version is:v25.01-0-g812e032","time":"2025-05-07T22:53:44Z"}
{"file":"/workspace-go/pkg/common/utils/logger_wrapper.go:26","func":"github.com/intel/sriov-fec-operator/pkg/common/utils.(*logrusWrapper).Info","level":"info","msg":"Starting server","time":"2025-05-07T22:53:45Z"}
{"file":"/workspace-go/pkg/common/utils/logger_wrapper.go:26","func":"github.com/intel/sriov-fec-operator/pkg/common/utils.(*logrusWrapper).Info","level":"info","msg":"Starting EventSource","source":"kind source: *v2.SriovFecNodeConfig","time":"2025-05-07T22:53:45Z"}
time="2025-05-07T22:53:45Z" level=info msg="Starting Controller"
{"file":"/workspace-go/pkg/common/utils/logger_wrapper.go:26","func":"github.com/intel/sriov-fec-operator/pkg/common/utils.(*logrusWrapper).Info","level":"info","msg":"Starting server","time":"2025-05-07T22:53:45Z"}
time="2025-05-07T22:53:45Z" level=info msg="Starting EventSource" source="kind source: *v1.SriovVrbNodeConfig"
time="2025-05-07T22:53:45Z" level=info msg="Starting Controller"
time="2025-05-07T22:53:45Z" level=info msg="Starting workers" worker count=1
time="2025-05-07T22:53:45Z" level=info msg="Starting workers" worker count=1
{"file":"/workspace-go/pkg/daemon/daemon_vrb.go:404","func":"github.com/intel/sriov-fec-operator/pkg/daemon.(*VrbNodeConfigReconciler).isCardUpdateRequired.func1","level":"info","msg":"Observed generation doesn't reflect requested one","observed":1,"requested":2,"time":"2025-05-07T22:55:58Z"}
{"current":{"type":"Configured","status":"False","observedGeneration":1,"lastTransitionTime":null,"reason":"InProgress","message":"Configuration started"},"file":"/workspace-go/pkg/daemon/daemon_vrb.go:287","func":"github.com/intel/sriov-fec-operator/pkg/daemon.(*VrbNodeConfigReconciler).updateStatus","level":"info","msg":"Configured condition transition","previous":{"type":"Configured","status":"False","observedGeneration":1,"lastTransitionTime":"2025-05-07T22:53:44Z","reason":"NotRequested","message":""},"time":"2025-05-07T22:55:58Z"}
I0507 22:55:58.959568       7 leaderelection.go:248] attempting to acquire leader lease vran-acceleration-operators/n3000-daemon-lease...
I0507 22:55:58.963481       7 leaderelection.go:258] successfully acquired lease vran-acceleration-operators/n3000-daemon-lease
{"file":"/workspace-go/pkg/common/drainhelper/drainhelper.go:179","func":"github.com/intel/sriov-fec-operator/pkg/common/drainhelper.(*DrainHelper).Run.func2","level":"info","msg":"started leading","time":"2025-05-07T22:55:58Z"}
{"file":"/workspace-go/pkg/common/drainhelper/drainhelper.go:201","func":"github.com/intel/sriov-fec-operator/pkg/common/drainhelper.(*DrainHelper).Run.func2","level":"info","msg":"worker function - start","time":"2025-05-07T22:55:58Z"}
{"file":"/workspace-go/pkg/daemon/node_management.go:344","func":"github.com/intel/sriov-fec-operator/pkg/daemon.(*NodeConfigurator).VrbApplySpec","inventory":{"sriovAccelerators":[{"vendorID":"8086","deviceID":"57c0","pciAddress":"0000:f7:00.0","driver":"vfio-pci","maxVirtualFunctions":16,"virtualFunctions":[]}]},"level":"info","msg":"current node status","time":"2025-05-07T22:55:59Z"}
{"file":"/workspace-go/pkg/daemon/node_management.go:424","func":"github.com/intel/sriov-fec-operator/pkg/daemon.(*NodeConfigurator).VrbconfigureAccelerator","level":"info","msg":"configuring PF","requestedConfig":{"pciAddress":"0000:f7:00.0","pfDriver":"vfio-pci","vfDriver":"vfio-pci","vfAmount":1,"bbDevConfig":{"vrb1":{"numVfBundles":1,"maxQueueSize":1024,"uplink4G":{"numQueueGroups":2,"numAqsPerGroups":16,"aqDepthLog2":4},"downlink4G":{"numQueueGroups":2,"numAqsPerGroups":16,"aqDepthLog2":4},"uplink5G":{"numQueueGroups":2,"numAqsPerGroups":16,"aqDepthLog2":4},"downlink5G":{"numQueueGroups":2,"numAqsPerGroups":16,"aqDepthLog2":4},"qfft":{"numQueueGroups":2,"numAqsPerGroups":16,"aqDepthLog2":4},"fftLut":{"fftUrl":"","fftChecksum":""}}},"vrbResourceName":""},"time":"2025-05-07T22:55:59Z"}
{"file":"/workspace-go/pkg/daemon/node_management.go:223","func":"github.com/intel/sriov-fec-operator/pkg/daemon.(*NodeConfigurator).VrbcleanAcceleratorConfig","level":"info","msg":"cleaning configuration on 0000:f7:00.0","time":"2025-05-07T22:55:59Z"}
{"args":["pkill","-9","-f","pf_bb_config.*0000:f7:00.0"],"cmd":"/usr/bin/pkill","file":"/workspace-go/pkg/daemon/common.go:35","func":"github.com/intel/sriov-fec-operator/pkg/daemon.execAndSuppress","level":"info","msg":"executing command","time":"2025-05-07T22:55:59Z"}
{"file":"/workspace-go/pkg/daemon/bbdevconfig.go:246","func":"github.com/intel/sriov-fec-operator/pkg/daemon.(*pfBBConfigController).stopPfBBConfig.func1","level":"info","msg":"ignoring errorCode(1) returned by pkill","time":"2025-05-07T22:55:59Z"}
{"cmd":["pkill","-9","-f","pf_bb_config.*0000:f7:00.0"],"error":"exit status 1","file":"/workspace-go/pkg/daemon/common.go:40","func":"github.com/intel/sriov-fec-operator/pkg/daemon.execAndSuppress","level":"info","msg":"ignoring error","time":"2025-05-07T22:55:59Z"}
{"file":"/workspace-go/pkg/daemon/common.go:48","func":"github.com/intel/sriov-fec-operator/pkg/daemon.execAndSuppress","level":"info","msg":"commands output","output":"","time":"2025-05-07T22:55:59Z"}
{"applying-work-around":"SCSY-190446","file":"/workspace-go/pkg/daemon/bbdevconfig.go:255","func":"github.com/intel/sriov-fec-operator/pkg/daemon.(*pfBBConfigController).stopPfBBConfig","level":"info","msg":"deleting/tmp/pf_bb_config.0000:f7:00.0.sock","time":"2025-05-07T22:55:59Z"}
{"error":"remove /tmp/pf_bb_config.0000:f7:00.0.sock: no such file or directory","file":"/workspace-go/pkg/daemon/bbdevconfig.go:258","func":"github.com/intel/sriov-fec-operator/pkg/daemon.(*pfBBConfigController).stopPfBBConfig","level":"info","msg":"cannot remove (/tmp/pf_bb_config.0000:f7:00.0.sock)) file: remove /tmp/pf_bb_config.0000:f7:00.0.sock: no such file or directory","time":"2025-05-07T22:55:59Z"}
{"file":"/workspace-go/pkg/daemon/node_management.go:186","func":"github.com/intel/sriov-fec-operator/pkg/daemon.(*NodeConfigurator).flrReset","level":"info","msg":"executing FLR for 0000:f7:00.0","time":"2025-05-07T22:55:59Z"}
{"args":["modprobe","vfio-pci","enable_sriov=1","disable_idle_d3=1"],"cmd":"/usr/sbin/modprobe","file":"/workspace-go/pkg/daemon/common.go:35","func":"github.com/intel/sriov-fec-operator/pkg/daemon.execAndSuppress","level":"info","msg":"executing command","time":"2025-05-07T22:56:00Z"}
{"file":"/workspace-go/pkg/daemon/common.go:48","func":"github.com/intel/sriov-fec-operator/pkg/daemon.execAndSuppress","level":"info","msg":"commands output","output":"","time":"2025-05-07T22:56:00Z"}
{"args":["modprobe","vfio-pci","enable_sriov=1","disable_idle_d3=1"],"cmd":"/usr/sbin/modprobe","file":"/workspace-go/pkg/daemon/common.go:35","func":"github.com/intel/sriov-fec-operator/pkg/daemon.execAndSuppress","level":"info","msg":"executing command","time":"2025-05-07T22:56:00Z"}
{"file":"/workspace-go/pkg/daemon/common.go:48","func":"github.com/intel/sriov-fec-operator/pkg/daemon.execAndSuppress","level":"info","msg":"commands output","output":"","time":"2025-05-07T22:56:00Z"}
{"file":"/workspace-go/pkg/daemon/node_management.go:65","func":"github.com/intel/sriov-fec-operator/pkg/daemon.(*NodeConfigurator).isDeviceBoundToDriver","level":"info","msg":"device is bound to driver","path":"/sys/bus/pci/devices/0000:f7:00.0/driver","time":"2025-05-07T22:56:00Z"}
{"driver":"/sys/bus/pci/drivers/vfio-pci","file":"/workspace-go/pkg/daemon/node_management.go:82","func":"github.com/intel/sriov-fec-operator/pkg/daemon.(*NodeConfigurator).unbindDeviceFromDriver","level":"info","msg":"driver to unbound device from","pciAddress":"0000:f7:00.0","time":"2025-05-07T22:56:00Z"}
{"file":"/workspace-go/pkg/daemon/node_management.go:117","func":"github.com/intel/sriov-fec-operator/pkg/daemon.(*NodeConfigurator).bindDeviceToDriver","level":"info","msg":"device's driver_override path","path":"/sys/bus/pci/devices/0000:f7:00.0/driver_override","time":"2025-05-07T22:56:00Z"}
{"file":"/workspace-go/pkg/daemon/node_management.go:124","func":"github.com/intel/sriov-fec-operator/pkg/daemon.(*NodeConfigurator).bindDeviceToDriver","level":"info","msg":"driver bind path","path":"/sys/bus/pci/drivers/vfio-pci/bind","time":"2025-05-07T22:56:00Z"}
{"file":"/workspace-go/pkg/daemon/bbdevconfig_ini_generator.go:107","func":"github.com/intel/sriov-fec-operator/pkg/daemon.logIniFile","generated BBDevConfig":"[MODE]\npf_mode_en = 0\n\n[VFBUNDLES]\nnum_vf_bundles = 1\n\n[MAXQSIZE]\nmax_queue_size = 1024\n\n[QUL4G]\nnum_qgroups        = 2\nnum_aqs_per_groups = 16\naq_depth_log2      = 4\n\n[QDL4G]\nnum_qgroups        = 2\nnum_aqs_per_groups = 16\naq_depth_log2      = 4\n\n[QUL5G]\nnum_qgroups        = 2\nnum_aqs_per_groups = 16\naq_depth_log2      = 4\n\n[QDL5G]\nnum_qgroups        = 2\nnum_aqs_per_groups = 16\naq_depth_log2      = 4\n\n[QFFT]\nnum_qgroups        = 2\nnum_aqs_per_groups = 16\naq_depth_log2      = 4\n","level":"info","msg":"logIniFile","time":"2025-05-07T22:56:00Z"}
{"file":"/workspace-go/pkg/daemon/bbdevconfig.go:312","func":"github.com/intel/sriov-fec-operator/pkg/daemon.(*fftUpdater).VrbgetFftFilePath","level":"info","msg":"Using default SRS FFT file for configuration","time":"2025-05-07T22:56:00Z"}
{"file":"/workspace-go/pkg/daemon/bbdevconfig.go:197","func":"github.com/intel/sriov-fec-operator/pkg/daemon.(*pfBBConfigController).updateFftWindowsCoefficientFilepath","level":"info","msg":"SRS FFT file path is : /sriov_workdir/vrb1/srs_fft_windows_coefficient.bin","time":"2025-05-07T22:56:00Z"}
{"args":["/sriov_workdir/pf_bb_config","VRB1","-c","/tmp/0000:f7:00.0.ini","-p","0000:f7:00.0","-v","02bddbbf-bbb0-4d79-886b-91bad3fbb510","-f","/sriov_workdir/vrb1/srs_fft_windows_coefficient.bin"],"cmd":"/sriov_workdir/pf_bb_config","file":"/workspace-go/pkg/daemon/common.go:35","func":"github.com/intel/sriov-fec-operator/pkg/daemon.execAndSuppress","level":"info","msg":"executing command","time":"2025-05-07T22:56:00Z"}
{"file":"/workspace-go/pkg/daemon/common.go:48","func":"github.com/intel/sriov-fec-operator/pkg/daemon.execAndSuppress","level":"info","msg":"commands output","output":"== pf_bb_config Version v25.01-0-g812e032 ==\nVRB1 PF [0000:f7:00.0] configuration complete!\nLog file = /var/log/pf_bb_cfg_0000:f7:00.0.log\n","time":"2025-05-07T22:56:00Z"}
{"file":"/workspace-go/pkg/daemon/bbdevconfig.go:409","func":"github.com/intel/sriov-fec-operator/pkg/daemon.monitorLogFile.func1","level":"info","msg":"Wed May  7 22:56:00 2025:INFO:Queue Groups UL4G 2 DL4G 2 UL5G 2 DL5G 2 FFT 2","pciAddr":"0000:f7:00.0","time":"2025-05-07T22:56:00Z"}
{"file":"/workspace-go/pkg/daemon/bbdevconfig.go:409","func":"github.com/intel/sriov-fec-operator/pkg/daemon.monitorLogFile.func1","level":"info","msg":"Wed May  7 22:56:00 2025:INFO:Configuration in VF mode","pciAddr":"0000:f7:00.0","time":"2025-05-07T22:56:00Z"}
{"file":"/workspace-go/pkg/daemon/bbdevconfig.go:409","func":"github.com/intel/sriov-fec-operator/pkg/daemon.monitorLogFile.func1","level":"info","msg":"Wed May  7 22:56:00 2025:INFO:  FFT Window coeffs preloading from /sriov_workdir/vrb1/srs_fft_windows_coefficient.bin","pciAddr":"0000:f7:00.0","time":"2025-05-07T22:56:00Z"}
{"file":"/workspace-go/pkg/daemon/bbdevconfig.go:409","func":"github.com/intel/sriov-fec-operator/pkg/daemon.monitorLogFile.func1","level":"info","msg":"Wed May  7 22:56:00 2025:INFO:  FFT Size 2048 Window 0 Size 296 Start -40","pciAddr":"0000:f7:00.0","time":"2025-05-07T22:56:00Z"}
{"file":"/workspace-go/pkg/daemon/bbdevconfig.go:409","func":"github.com/intel/sriov-fec-operator/pkg/daemon.monitorLogFile.func1","level":"info","msg":"Wed May  7 22:56:00 2025:INFO:  FFT Version Number D588","pciAddr":"0000:f7:00.0","time":"2025-05-07T22:56:00Z"}
{"file":"/workspace-go/pkg/daemon/bbdevconfig.go:409","func":"github.com/intel/sriov-fec-operator/pkg/daemon.monitorLogFile.func1","level":"info","msg":"Wed May  7 22:56:00 2025:INFO:VRB1 configuration complete","pciAddr":"0000:f7:00.0","time":"2025-05-07T22:56:00Z"}
{"file":"/workspace-go/pkg/daemon/bbdevconfig.go:409","func":"github.com/intel/sriov-fec-operator/pkg/daemon.monitorLogFile.func1","level":"info","msg":"Wed May  7 22:56:00 2025:INFO:VRB1 PF [0000:f7:00.0] configuration complete!","pciAddr":"0000:f7:00.0","time":"2025-05-07T22:56:00Z"}
{"file":"/workspace-go/pkg/daemon/bbdevconfig.go:409","func":"github.com/intel/sriov-fec-operator/pkg/daemon.monitorLogFile.func1","level":"info","msg":"Wed May  7 22:56:00 2025:INFO:Running in daemon mode for VFIO VF token","pciAddr":"0000:f7:00.0","time":"2025-05-07T22:56:00Z"}
{"file":"/workspace-go/pkg/daemon/node_management.go:65","func":"github.com/intel/sriov-fec-operator/pkg/daemon.(*NodeConfigurator).isDeviceBoundToDriver","level":"info","msg":"device is bound to driver","path":"/sys/bus/pci/devices/0000:f7:00.1/driver","time":"2025-05-07T22:56:00Z"}
{"driver":"/sys/bus/pci/drivers/vfio-pci","file":"/workspace-go/pkg/daemon/node_management.go:82","func":"github.com/intel/sriov-fec-operator/pkg/daemon.(*NodeConfigurator).unbindDeviceFromDriver","level":"info","msg":"driver to unbound device from","pciAddress":"0000:f7:00.1","time":"2025-05-07T22:56:00Z"}
{"file":"/workspace-go/pkg/daemon/node_management.go:117","func":"github.com/intel/sriov-fec-operator/pkg/daemon.(*NodeConfigurator).bindDeviceToDriver","level":"info","msg":"device's driver_override path","path":"/sys/bus/pci/devices/0000:f7:00.1/driver_override","time":"2025-05-07T22:56:00Z"}
{"file":"/workspace-go/pkg/daemon/node_management.go:124","func":"github.com/intel/sriov-fec-operator/pkg/daemon.(*NodeConfigurator).bindDeviceToDriver","level":"info","msg":"driver bind path","path":"/sys/bus/pci/drivers/vfio-pci/bind","time":"2025-05-07T22:56:00Z"}
{"file":"/workspace-go/pkg/daemon/device_plugin_controller.go:78","func":"github.com/intel/sriov-fec-operator/pkg/daemon.(*DevicePluginController).RestartDevicePlugin.(*DevicePluginController).waitForDevicePluginRestart.func1","level":"info","msg":"device-plugin is running","time":"2025-05-07T22:56:02Z"}
{"file":"/workspace-go/pkg/common/drainhelper/drainhelper.go:203","func":"github.com/intel/sriov-fec-operator/pkg/common/drainhelper.(*DrainHelper).Run.func2","level":"info","msg":"worker function - end","performUncordon":true,"time":"2025-05-07T22:56:02Z"}
{"file":"/workspace-go/pkg/common/drainhelper/drainhelper.go:175","func":"github.com/intel/sriov-fec-operator/pkg/common/drainhelper.(*DrainHelper).Run.func2.1","level":"info","msg":"cancelling the context to finish the leadership","time":"2025-05-07T22:56:02Z"}
{"file":"/workspace-go/pkg/common/drainhelper/drainhelper.go:209","func":"github.com/intel/sriov-fec-operator/pkg/common/drainhelper.(*DrainHelper).Run.func3","level":"info","msg":"stopped leading","time":"2025-05-07T22:56:02Z"}
{"file":"/workspace-go/pkg/common/drainhelper/drainhelper.go:153","func":"github.com/intel/sriov-fec-operator/pkg/common/drainhelper.(*DrainHelper).Run.func1","level":"info","msg":"releasing the lock (bug mitigation)","time":"2025-05-07T22:56:02Z"}
{"current":{"type":"Configured","status":"True","observedGeneration":2,"lastTransitionTime":null,"reason":"Succeeded","message":"Configured successfully"},"file":"/workspace-go/pkg/daemon/daemon_vrb.go:287","func":"github.com/intel/sriov-fec-operator/pkg/daemon.(*VrbNodeConfigReconciler).updateStatus","level":"info","msg":"Configured condition transition","previous":{"type":"Configured","status":"False","observedGeneration":1,"lastTransitionTime":"2025-05-07T22:53:44Z","reason":"InProgress","message":"Configuration started"},"time":"2025-05-07T22:56:02Z"}